# EC2

Elastic Compute Cloud

- **아마존 웹 서비스(AWS)에서 제공하는 클라우드 컴퓨팅 서비스**
- **가상 서버(VM)**
- AWS의 물리 장비를 가상화해 인스턴스 단위로 제공
- 운영체제(OS), CPU, 메모리, 네트워크 등 구성해 원하는 서버 실행 가능
- 클라우드 컴퓨팅은 인터넷(클라우드)을 통해 서버, 스토리지, 데이터베이스 등의 컴퓨팅 서비스를 제공 → **AWS에서 원격으로 제어할 수 있는 가상의 컴퓨터를 한 대 빌리는 것**
- 후불제 PC방과 같이 **사용한 만큼 비용을 지불**하기 때문에 탄력적인 이라는 의미의 **Elastic**이라는 단어가 붙어있다. Elastic은 **비용**적인 부분 뿐만이 아니라 필요에 따라 **성능, 용량**을 자유롭게 조절할 수 있다는 의미도 가지고 있다

클라우드 서버로, **AWS에서 비용, 성능, 용량면에서 탄력적인 클라우드 컴퓨터를 제공하는 서비스**

### 인스턴스 구매 옵션

**온디맨드(On-Demand)**

- 사용한 만큼 초 단위 비용 지불
- 일시적/예측 불가 트래픽에 적합

**예약 인스턴스(Reserved Instances, RI)**

- **1~3년 약정**, 최대 72% 할인
- **예측 가능한 워크로드**에 적합
- Standard RI vs Convertible RI
    
    
    | 항목 | Reserved Instances (RI) | Savings Plans (SP) |
    | --- | --- | --- |
    | 약정 방식 | 인스턴스 사용 | 시간당 사용 금액 |
    | 할인율 | 최대 72% (Standard), 66% (Convertible) | 최대 72% |
    | 유연성 | 제한적 | 높음 |
    | 적용 범위 | EC2만 | EC2, Lambda, Fargate |

**절감형 플랜(Savings Plans)**

- 인스턴스 사용량이 아니라 **시간당 지출 금액을 약정**
- EC2 + Lambda + Fargate까지 범용 적용
- RI보다 유연함

### 스팟 인스턴스(Spot)

- AWS의 **남는 용량을 최대 90% 할인**된 가격에 사용
- 중단될 수 있음 → 백그라운드 작업/분산 처리용

**스팟 특징**

- 스팟 가격이 내가 설정한 최대 가격보다 올라가면 2분 후 종료
- 일회성 요청 / 영구 요청
- 스팟 플릿(Spot Fleet)으로 여러 타입 조합하여 목표 용량 확보

**전용 호스트 vs 전용 인스턴스**

| 항목 | 전용 인스턴스 | 전용 호스트 |
| --- | --- | --- |
| 형태 | 물리 서버에서 “격리된 인스턴스” | 물리 서버 전체를 전용 |
| 보안/격리 | 높음 | 아주 높음 |
| 라이선스 관리 | 제한적 | BYOL 등 라이선스 직접 관리 가능 |

**용량 예약(Capacity Reservation)**

- 특정 AZ의 인스턴스 용량만 확보
- 요금 할인 없음 → RI 또는 SP와 연동해 할인 적용 가능

---

**인스턴스 타입 (Instance Types)**

| 패밀리 | 목적 |
| --- | --- |
| **T, M** | 범용 |
| **C** | 컴퓨팅 최적화 |
| **R, X, Z** | 메모리 최적화 |
| **P, G, F** | GPU/가속 컴퓨팅 |
| **I** | 스토리지 최적화 |
| **Hpc** | 초고성능 컴퓨팅 |

**네이밍 예시: C7gn.2xlarge**

- C = 컴퓨팅 최적화
- 7 = 7세대
- gn = 네트워크 강화 등 속성
- 2xlarge = vCPU/메모리 크기

---

### T 시리즈 – 버스트 가능 인스턴스

- 낮은 CPU 부하 → 크레딧 적립
- 순간 부하 증가 → 크레딧 소비해 버스트
- 지속 고부하 필요 → M 시리즈 추천

---

### 배치 그룹(Placement Groups)

| 타입 | 설명 | 장점 | 단점 |
| --- | --- | --- | --- |
| **Cluster** | 동일 AZ, 가까운 물리 하드웨어 배치 | 초저지연, 고성능 네트워크 | 장애 시 전부 영향 |
| **Partition** | 파티션별 독립 하드웨어 | 장애 격리 | 구성 복잡 |
| **Spread** | 모두 다른 하드웨어 | 최대 내결함성 | 소수 인스턴스만 가능 |

---

### 네트워크: ENI & Elastic IP

### ENI (Elastic Network Interface)

- 가상 NIC
- 기본 ENI(eth0)는 분리 불가
- 추가 ENI는 연결/분리 가능 → 고가용성, 장애 복구에 좋음

### Elastic IP (EIP)

- 고정 퍼블릭 IPv4 주소
- **연결되어 있지 않으면 요금 부과됨**
- 리전당 기본 5개 제한

---

### AMI (Amazon Machine Image)

- OS + 설정 + 소프트웨어를 담은 “템플릿 이미지”
- 동일한 설정 EC2를 무한 복제 가능
- Marketplace AMI, Custom AMI 가능
- 다른 리전으로 복사 가능

---

### EC2 인스턴스 상태

| 상태 | 의미 |
| --- | --- |
| Pending | 생성 준비 중 |
| Running | 실행(과금) |
| Stopping | 중지 준비 |
| Stopped | 중지됨(EC2 요금 없음, EBS 요금 있음) |
| Terminated | 완전 삭제 |

---

### 절전 모드 (Hibernate)

- 중지 시 **RAM 내용을 EBS에 저장**
- 시작 시 RAM을 복원 → 프로세스 이어 실행
- 조건
    - EBS 암호화 필수
    - EBS 볼륨이 RAM 이상 크기 필요
    - 스팟 인스턴스는 지원 안 함
    - 최대 60일 유지
