# EBS

Elastic Block Store

**개념**

- **EC2 전용 네트워크 기반 블록 스토리지(영구 저장소)**
- 인스턴스 종료해도 데이터 유지
- **AZ 단위로 고정**(같은 AZ EC2에서만 연결 가능)

**기본 특징**

- 네트워크 연결 → 약간의 지연 존재
- 하나의 EBS → 기본적으로 EC2 한 개에만 연결
- EC2 하나 → 여러 EBS 연결 가능
- 크기, IOPS, 처리량을 사전에 정해 프로비저닝해야 함

---

### 2. EBS 볼륨 유형

| 유형 | 특징 | 용도 |
| --- | --- | --- |
| **gp3/gp2 (범용 SSD)** | 균형 잡힌 성능 | 대부분의 워크로드 |
| **io2/io1 (프로비저닝 IOPS SSD)** | 초고성능 IOPS, Multi-Attach 지원 | DB, 대규모 처리 |
| **st1 (HDD)** | 처리량 중심 | 빅데이터, 로그 |
| **sc1 (HDD)** | 최저 비용, 느림 | 아카이브, 저빈도 액세스 |
| sc1/st1 | **부팅 볼륨 불가** |  |

---

### 3. EBS 스냅샷

- 특정 시점 **백업(증분식)**
- 변경된 블록만 저장 → 비용 절감
- 다른 AZ/리전으로 복사 가능
- 스냅샷 기반으로 새 EBS 생성 가능

**스냅샷 특수 기능**

**1) Snapshot Archive**

- 스냅샷을 아카이브 계층으로 이동해 **비용 75% 절감**
- 복원 24~72시간

**2) Snapshot Recycle Bin(휴지통)**

- 삭제된 스냅샷을 1일~1년 보관
- 실수로 삭제해도 복구 가능

**3) Fast Snapshot Restore (FSR)**

- 스냅샷→볼륨 생성 시 **IO 지연 없이 즉시 사용 가능**
- 초기화(pull-on-first-access) 제거
- AZ 단위로 활성화, 비용 높음

---

### 4. EBS Multi-Attach

**기능**

- **하나의 EBS 볼륨을 여러 EC2에 동시에 연결**
- 최대 16개 EC2 연결 가능
- **io1/io2 볼륨 타입만 지원**

**조건**

- 클러스터 인식 파일 시스템 필요
    
    (예: GFS2 등)
    
- XFS/EXT4 같은 일반 파일 시스템 **사용 불가**

---

### 5. Instance Store(인스턴스 스토어)

**개념**

- **EC2 물리 호스트에 직접 연결된 로컬 디스크**
- 초고속 I/O + 초저지연
- 특정 인스턴스 타입만 제공
    - 이름에 **d가 있는 타입(m5d, i3d 등)**
    - 제공되면 자동 포함됨(EBS 루트와 동시에 존재)

**특징**

- 인스턴스에 **완전 종속**
    - 인스턴스 **중지·종료 시 데이터 삭제**
- 스냅샷/백업 없음 → 사용자 책임
- 크기 변경 불가

**장점**

- **가장 빠른 성능** (EBS보다 훨씬 빠름)
- 높은 IOPS, 낮은 지연 → 캐시/버퍼/임시 파일에 적합

**단점**

- 휘발성: 서버 중지/종료하면 데이터 사라짐
- 백업 직접 해야 함

---

### 6. EBS vs Instance Store 비교 요약

| 항목 | EBS | Instance Store |
| --- | --- | --- |
| 저장 방식 | 네트워크 기반 | 물리적 로컬 디스크 |
| 데이터 유지 | 인스턴스 종료 후에도 유지 | 종료/중지 시 삭제 |
| 성능 | 중~고 | **최고 성능** |
| 크기 변경 | 가능 | 불가능 |
| 스냅샷 | 있음 | 없음 |
| AZ 제약 | 있음 | 인스턴스 타입에 종속 |
| 사용 사례 | OS, DB, 일반 스토리지 | 캐시, 버퍼, 임시 데이터, 빅데이터 준비 작업 |
