# RDS

- 완전 관리형 관계형 데이터베이스 서비스

## 지원 엔진

- MySQL
- PostgreSQL
- MariaDB
- Oracle
- Microsoft SQL Server(=MSSQL)
- IBM Db2
- Aurora(MySQL/Postgre)

## DB 인스턴스 클래스

- 스탠다드 클래스(m)
- 메모리 최적화 클래스(r, x)
- 버스터블 클래스(t)

## 스토리지

- 범용 SSD
- 프로비저닝된 IOPS SSD
- 마그네틱

## 읽기 전용 복제본(Read Replica)

- 읽기 작업 분산을 통한 읽기 성능 향상
- 최대 15개까지 생성 가능
- 동일 AZ, 교차 AZ, 교차 리전 생성 가능
- 비동기식 데이터 복제
- 읽기 전용 복제본을 마스터로 승격 가능

## Multi-AZ 구성

- 재해 복구 및 고가용성
- 마스터 DB, standby DB가 다른 AZ에 배치
- standby DB는 장애 시 자동으로 마스터 승격
- 동기식 데이터 복제

## 백업 및 모니터링

- 자동 백업
  - 자동으로 DB 전체 백업
  - 5분마다 트랜잭션 로그 백업, 5분 전으로 롤백 가능
  - 백업 보존은 1-35일
  - 백업 비활성화 가능
- 수동 스냅샷
  - 사용자가 수동으로 생성
  - 자동 백업과 달리 만료되지 않으며 직접 삭제할 때까지 유지
- 복원 옵션
  - 백업, 스냅샷 복원 시 항상 새 DB 인스턴스 생성
  - S3에서 MySQL 백업 파일을 저장한 후 새 DB 인스턴스로 복원 가능

## 보안

### 저장 데이터 암호화

- DB 생성 시 암호화 설정(이후 변경 불가), AWS KMS를 활용해 암호화 구성
- 마스터 DB 암호화 시 Read Replica, 백업, 스냅샷 자동 암호화
- 암호화되지 않은 DB 암호화
  - 스냅샷 생성
  - 암호화된 스냅샷 사본 생성
  - 암호화된 스냅샷에서 DB 복원

### 기타 보안 설정

- 전송중 암호화(TLS) 기본 지원
- 인증 접근 제한
  - IAM 인증 통합
  - VPC 보안 그룹 사용
  - SSH 액세스 제한(RDS Custom)
- 모니터링: CloudWatch Logs 통합

## 추가 기능

### RDS 스토리지 오토스케일링

- 스토리지 부족 시 자동 확장
- 설정된 최대 스토리지 용량까지 자동 확장

### RDS Custom

- Oracle, MSSQL 지원
- 기저 OS, DB 소프트웨어에 직접 접근 가능
  - RDS 인스턴스에 SSH, SSM Sesion Manager로 접근 가능
  - 운영체제 구성 변경 가능
- 주의 사항
  - 자동화 비활성화 필요: AWS 자동화 기능이 사용자 지정 설정을 덮어쓸 수 있음
  - 스냅샷 생성 권장: 오류 발생 가능성 높음

### 프록시

- RDS-애플리케이션 사이에 위치하는 완전 관리형 DB 프록시
- 리버스 프록시로, RDS로 오는 모든 애플리케이션 요청을 받아 RDS로 전달
- 애플리케이션이 RDS에 직접 연결하는 대신 RDS 프록시의 엔드포인트를 통해 연결
  - 프록시는 연결 풀을 형성해 효율적으로 연결을 관리함
  - 직접적으로 RDS에 연결되지 않아 연결 수 및 부하 감소

### 이벤트 알림

- S3 이벤트 알림과 비슷한 기능
- 이벤트 발생 시 SNS 등을 통한 알림 전송
